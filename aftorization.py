from customtkinter import *
from socket import socket, AF_INET, SOCK_STREAM

class ConnectWindow(CTk):
    def __init__(self):
        super().__init__()
        self.title("–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ –¥—É—Ä–∫–∏")
        self.geometry("300x300")  # –¢—Ä–æ—Ö–∏ –±—ñ–ª—å—à–µ –º—ñ—Å—Ü—è –¥–ª—è —Ñ—Ä–µ–π–º—É —Ç–∞ –º–∞–π–±—É—Ç–Ω—ñ—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤, –±–æ –º–∞–ª–µ–Ω—å–∫–µ –≤—ñ–∫–Ω–æ ‚Äî —Å—É–º–Ω–æ üò¢

        # --- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤—ñ–∫–Ω–∞ ---
        CTkLabel(self, text="–í—Ö—ñ–¥ –≤ –¥—É—Ä–∫—É", font=("Arial", 20, "bold")).pack(pady=10)
        # –ü–æ–∫–∞–∑—É—î–º–æ —Ö—Ç–æ —Ç—É—Ç –±–æ—Å—Å, –∞–±–æ —Ö–æ—á–∞ –± —Ö—Ç–æ –±—É–¥–µ —Å–∏–¥—ñ—Ç–∏ –≤ –¥—É—Ä—Ü—ñ üòé

        # --- –û—Å–Ω–æ–≤–Ω–∏–π —Ñ—Ä–µ–π–º ---
        self.main_frame = CTkFrame(self)
        self.main_frame.pack(pady=10, padx=10, fill="both", expand=True)
        # –£—Å—ñ –ø–æ–ª—è —Ç–∞ –∫–Ω–æ–ø–∫–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ñ—Ä–µ–π–º—É ‚Äî –ø–æ—Ä—è–¥–æ–∫ —è–∫ —É –∫—ñ–º–Ω–∞—Ç—ñ —É –º–∞–º–∏–Ω—ñ–π —Ö–∞—Ç—ñ üè†

        # --- –ü–æ–ª—è –≤–≤–æ–¥—É ---
        self.name_entry = CTkEntry(self.main_frame, placeholder_text="–ü—Ä–æ–ø—É—Å–∫ –≤ –¥—É—Ä–∫—É")
        self.name_entry.pack(pady=5)
        # –¢—É—Ç —Ç–∏ –≤–≤–æ–¥–∏—à –Ω—ñ–∫, –±–æ –±–µ–∑ –Ω—å–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –Ω–µ –≤–ø—ñ–∑–Ω–∞—î, —Ö—Ç–æ –∫—Ä–∏—á–∏—Ç—å ‚Äú–ü—Ä–∏–≤—ñ—Ç!‚Äù üò±

        self.host_entry = CTkEntry(self.main_frame, placeholder_text="IP —Å–µ—Ä–≤–µ—Ä–∞(–¥—É—Ä–∫–∏)")
        self.host_entry.pack(pady=5)
        # IP ‚Äî —è–∫ –∞–¥—Ä–µ—Å–∞ –±–∞–±—É—Å—ñ, —â–æ–± –∑–Ω–∞—Ç–∏ –∫—É–¥–∏ –π—Ç–∏ üè°

        self.port_entry = CTkEntry(self.main_frame, placeholder_text="–ü–æ—Ä—Ç –¥—É—Ä–∫–∏")
        self.port_entry.pack(pady=5)
        # –ü–æ—Ä—Ç ‚Äî –¥–≤–µ—Ä—ñ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, —è–∫—â–æ –≤—ñ–¥–∫—Ä–∏—Ç—ñ, —Ç–æ –º–æ–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ üö™

        # --- –ö–Ω–æ–ø–∫–∏ ---
        CTkButton(self.main_frame, text="Save", command=self.save).pack(pady=5)
        # Save ‚Äî –∑–±–µ—Ä—ñ–≥–∞—î —Ç–≤–æ—ó –¥–∞–Ω—ñ, —â–æ–± –Ω–µ –∑–∞–±—É—Ç–∏ –Ω—ñ–∫ —ñ –Ω–µ –ø—Ä–æ–∫–ª–∏–Ω–∞—Ç–∏ —Å–µ–±–µ üòµ‚Äçüí´
        CTkButton(self.main_frame, text="Delete", command=self.delete).pack(pady=5)
        # Delete ‚Äî –≤–∏–¥–∞–ª—è—î –≤—Å–µ, —â–æ–± –ø–æ—á–∞—Ç–∏ –∑ —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞, —è–∫ –º–µ–º –ø—Ä–æ Ctrl+Z ü´°
        CTkButton(self.main_frame, text="Connect", command=self.connect).pack(pady=5)
        # Connect ‚Äî –ø—ñ–¥–∫–ª—é—á–∞—î —Ç–µ–±–µ –¥–æ –¥—É—Ä–∫–∏, –≥–æ–ª–æ–≤–Ω–µ –Ω–µ –≤–ø–∞—Å—Ç–∏ –≤ —Ç—Ä—É–±—É üå™Ô∏è

        # --- –¢–∏–º—á–∞—Å–æ–≤–µ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö ---
        self.saved_data = {"nick":"", "ip":"", "port":""}
        # –¢—É—Ç –∑–±–µ—Ä—ñ–≥–∞—î–º–æ —Ç–≤—ñ–π –Ω—ñ–∫, IP —ñ –ø–æ—Ä—Ç, —è–∫ —Å–∫—Ä–∏–Ω—å–∫—É –∑—ñ —Å–∫–∞—Ä–±–∞–º–∏ üè¥‚Äç‚ò†Ô∏è

    # --- –§—É–Ω–∫—Ü—ñ—è Save ---
    def save(self):
        self.saved_data["nick"] = self.name_entry.get()
        self.saved_data["ip"] = self.host_entry.get()
        self.saved_data["port"] = self.port_entry.get()
        print("–ó–±–µ—Ä–µ–∂–µ–Ω–æ —Ñ—ñ–≥–Ω—é:", self.saved_data)
        # –í—Å–µ –∑–±–µ—Ä–µ–∂–µ–Ω–æ, –º–æ–∂–Ω–∞ –π—Ç–∏ –≤–∞—Ä–∏—Ç–∏ –±–æ—Ä—â, –¥–∞–Ω—ñ –∂–∏–≤—ñ üç≤

    # --- –§—É–Ω–∫—Ü—ñ—è Delete ---
    def delete(self):
        self.name_entry.delete(0, "end")
        self.host_entry.delete(0, "end")
        self.port_entry.delete(0, "end")
        self.saved_data = {"nick":"", "ip":"", "port":""}
        print("–î–∞–Ω—ñ –æ—á–∏—â–µ–Ω–æ(—Ç–µ–ø–µ—Ä –≤–æ–Ω–∏ –ª–∏—à–µ –ø–∏–ª –∞–±–æ –≤ —Ç–≤–æ—ó–π –≥–æ–ª–æ–≤—ñ –∑–∞–º—ñ—Å—Ç—å –±—ñ–ª–æ—á–∫–∏ üêøÔ∏è)")
        # –í—Å–µ —á–∏—Å—Ç–æ, –ø–æ—á–∏—Å—Ç–∏–ª–∏ —è–∫ –≤—ñ–∫–Ω–æ –ø—ñ—Å–ª—è –ø—Ä–∏–±–∏—Ä–∞–Ω–Ω—è, –≤—Å–µ –±–ª–∏—â–∏—Ç—å ‚ú®

    # --- –§—É–Ω–∫—Ü—ñ—è Connect ---
    def connect(self):
        nick = self.name_entry.get()
        ip = self.host_entry.get()
        port = self.port_entry.get()
        if not nick or not ip or not port:
            print("–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –ø–æ–ª—è... –∞–±–æ –Ω–∞ –º–∏–ª–æ üßº")
            return
        try:
            port = int(port)  # –ü–æ—Ä—Ç –º–∞—î –±—É—Ç–∏ —á–∏—Å–ª–æ–º, –±–æ –Ω–µ –º–æ–∂–Ω–∞ –π—Ç–∏ –∫—Ä—ñ–∑—å —Å—Ç—ñ–Ω—É üëª
            sock = socket(AF_INET, SOCK_STREAM)  # TCP —Å–æ–∫–µ—Ç, –Ω–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è üìû
            sock.connect((ip, port))  # –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ—Å—è, –Ω—ñ–±–∏ —Å—Ç—É–∫–∞—î–º–æ —É –¥–≤–µ—Ä—ñ –±—É–¥–∏–Ω–∫—É üè†
            print(f"{nick} –ø—ñ–¥–∫–ª—é—á–∏–≤—Å—è –¥–æ –¥—É—É—Ä–∫–∏ {ip}:{port} üéâ")
            self.destroy()  # –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –≤—ñ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó, —è–∫ –∑–∞–∫—Ä–∏–≤–∞—î–º–æ –∫–Ω–∏–∂–∫—É –ø—ñ—Å–ª—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—è üìö
        except Exception as e:
            print("–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è, —Ç–∏ —à–æ—Å—å –Ω–µ —É–≤—ñ–≤ –≤–∞—Å—å, –∞–±–æ —à–æ—Å—å –Ω–µ —Ç–∞–∫... –î–∞–≤–∞–π –ø–æ –Ω–æ–≤–æ–π –ú—ñ—à–∞ –≤—Å—å–æ –≤—ñ–≥–Ω—è üî•:", e)

# --- –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É ---
if __name__ == "__main__":
    ConnectWindow().mainloop()

